{"ast":null,"code":"import { environment } from \"./environment\";\n// import { AppRoutingModuleRoutingModule } from \"@angular/router\";\nimport { createClient } from \"@supabase/supabase-js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nclass SupabaseService {\n  constructor(route) {\n    this.route = route;\n    this.supabase = createClient(environment.supabaseUrl, environment.supabaseKey);\n    this.supabase.auth.setSession({\n      access_token: \"\",\n      refresh_token: \"\"\n    });\n  }\n  signin(email, password) {\n    this.supabase.auth.signInWithPassword({\n      email,\n      password\n    }).then(response => {\n      console.log(response);\n      this.route.navigate([\"/feed\"]);\n      caches.open(\"sessionInfo\").then(res => {\n        console.log(res);\n      });\n    }).catch(error => {\n      console.log(\"Error logging in \", error);\n    });\n  }\n  registerUser(email, password) {\n    let data;\n    this.supabase.auth.signUp({\n      email,\n      password\n    }).then(response => {\n      console.log(\"User Registered\", response.data);\n      this.supabase.from(\"users\").insert({\n        id: response.data.user?.id,\n        username: \"bhavanishankar\",\n        display_name: \"Bhavani\",\n        email: response.data.user?.email\n      }).then(insert => {\n        console.log(insert);\n      });\n    }).catch(error => {\n      console.log(\"Error registering user\", error);\n    });\n  }\n  getdata() {\n    this.supabase.from(\"posts\").select(\"*\").then(res => {\n      console.log(res.data);\n    });\n  }\n  insertdata() {\n    this.supabase.from(\"users\").insert({\n      username: \"bhavanishankar\",\n      display_name: \"Bhavani Shankar\"\n    }).then(res => {\n      console.log(res.data);\n    });\n  }\n}\nSupabaseService.ɵfac = function SupabaseService_Factory(t) {\n  return new (t || SupabaseService)(i0.ɵɵinject(i1.Router));\n};\nSupabaseService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: SupabaseService,\n  factory: SupabaseService.ɵfac,\n  providedIn: \"root\"\n});\nexport { SupabaseService };","map":{"version":3,"names":["environment","createClient","SupabaseService","constructor","route","supabase","supabaseUrl","supabaseKey","auth","setSession","access_token","refresh_token","signin","email","password","signInWithPassword","then","response","console","log","navigate","caches","open","res","catch","error","registerUser","data","signUp","from","insert","id","user","username","display_name","getdata","select","insertdata","i0","ɵɵinject","i1","Router","factory","ɵfac","providedIn"],"sources":["E:\\green\\src\\app\\supabase.service.ts"],"sourcesContent":["// import { AppRoutingModule } from \"./app-routing.module\";\r\nimport { Injectable } from \"@angular/core\";\r\nimport { environment } from \"./environment\";\r\n// import { pgTable, serial, text, varchar } from \"drizzle-orm/pg-core\";\r\n// import { drizzle } from \"drizzle-orm/postgres-js\";\r\n// import postgres from \"postgres\";\r\nimport { ActivatedRoute, Router } from \"@angular/router\";\r\n// import { AppRoutingModuleRoutingModule } from \"@angular/router\";\r\nimport { createClient, SupabaseClient } from \"@supabase/supabase-js\";\r\n@Injectable({\r\n  providedIn: \"root\",\r\n})\r\nexport class SupabaseService {\r\n  private supabase: SupabaseClient;\r\n\r\n  constructor(private route: Router) {\r\n    this.supabase = createClient(\r\n      environment.supabaseUrl,\r\n      environment.supabaseKey\r\n    );\r\n    this.supabase.auth.setSession({ access_token: \"\", refresh_token: \"\" });\r\n  }\r\n  signin(email: string, password: string) {\r\n    this.supabase.auth\r\n      .signInWithPassword({ email, password })\r\n      .then((response) => {\r\n        console.log(response);\r\n        this.route.navigate([\"/feed\"]);\r\n        caches.open(\"sessionInfo\").then((res) => {\r\n          console.log(res);\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error logging in \", error);\r\n      });\r\n  }\r\n  registerUser(email: string, password: string) {\r\n    let data: any;\r\n    this.supabase.auth\r\n      .signUp({ email, password })\r\n      .then((response) => {\r\n        console.log(\"User Registered\", response.data);\r\n        this.supabase\r\n          .from(\"users\")\r\n          .insert({\r\n            id: response.data.user?.id,\r\n            username: \"bhavanishankar\",\r\n            display_name: \"Bhavani\",\r\n            email: response.data.user?.email,\r\n          })\r\n          .then((insert) => {\r\n            console.log(insert);\r\n          });\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error registering user\", error);\r\n      });\r\n  }\r\n  getdata() {\r\n    this.supabase\r\n      .from(\"posts\")\r\n      .select(\"*\")\r\n      .then((res) => {\r\n        console.log(res.data);\r\n      });\r\n  }\r\n  insertdata() {\r\n    this.supabase\r\n      .from(\"users\")\r\n      .insert({\r\n        username: \"bhavanishankar\",\r\n        display_name: \"Bhavani Shankar\",\r\n      })\r\n      .then((res) => {\r\n        console.log(res.data);\r\n      });\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}